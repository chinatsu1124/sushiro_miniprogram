# 寿司郎取号小助手 - 微信小程序

基于 `spa_server_standalone.py` 开发的微信小程序版本，用于实时查看寿司郎餐厅的等待时间和叫号数据。

## 功能特性

### 1. 主页 (首页)
- 🌍 地区选择（支持多个地区）
- 🏪 门店选择（显示门店列表）
- 📅 日期选择（可选今天、昨天或其他日期）
- 📊 实时数据统计展示：
  - 当前须等待号
  - 预计等待时间
  - 平均每分钟叫号
  - 最高每分钟叫号
  - 平均每分钟新增号
  - 最高每分钟新增号

### 2. 网页版图表链接
- 🌐 引导用户访问完整的网页版图表
- 📊 完整的数据趋势分析
- 🔗 一键复制链接到剪贴板
- 💻 网页版地址：https://sushiro.chinatsu1124.com

### 3. 就餐分析页面
- 🍽️ 智能就餐时间分析
- ⏰ 预计等待时间预测
- 👥 预计排队人数估算
- 💡 智能建议
- 📊 历史数据统计
- ⭐ 最佳就餐时间推荐

## 技术架构

### 前端技术
- **框架**: 微信小程序原生框架
- **语言**: TypeScript
- **样式**: WXSS (WeChat Style Sheets)
- **数据可视化**: 引导至网页版完整图表
- **UI设计**: 渐变色彩 + 卡片式布局

### 数据管理
- **全局状态管理**: App 全局数据 + 本地存储
- **API服务**: 统一的 API 调用封装
- **数据共享**: 页面间数据传递与持久化

### API接口
所有 API 接口与原 Python 服务器保持一致：
- `/api/regions` - 获取地区列表
- `/api/stores` - 获取门店列表
- `/api/dates` - 获取可用日期
- `/api/stats` - 获取统计数据
- `/api/chart-data` - 获取图表数据
- `/api/dining-analysis` - 获取就餐分析

## 项目结构

```
miniprogram/
├── app.json              # 小程序配置文件
├── app.ts                # 小程序入口文件
├── app.wxss              # 全局样式文件
├── pages/                # 页面目录
│   ├── index/            # 主页
│   │   ├── index.wxml    # 页面结构
│   │   ├── index.wxss    # 页面样式
│   │   ├── index.ts      # 页面逻辑
│   │   └── index.json    # 页面配置
│   ├── charts/           # 图表页面
│   │   ├── charts.wxml
│   │   ├── charts.wxss
│   │   ├── charts.ts
│   │   └── charts.json
│   ├── dining-analysis/  # 就餐分析页面
│   │   ├── dining-analysis.wxml
│   │   ├── dining-analysis.wxss
│   │   ├── dining-analysis.ts
│   │   └── dining-analysis.json
│   └── logs/             # 日志页面（保留）
├── components/           # 组件目录
│   └── ec-canvas/        # ECharts 画布组件
│       ├── ec-canvas.json
│       ├── ec-canvas.wxml
│       ├── ec-canvas.wxss
│       ├── ec-canvas.ts
│       └── echarts.ts    # 简化的 ECharts 库
└── utils/                # 工具目录
    └── api.ts            # API 服务封装
```

## 使用说明

### 开发环境配置
1. 安装微信开发者工具
2. 导入项目目录
3. 配置 API 服务器地址（在 `utils/api.ts` 中修改 `API_BASE_URL`）

### API 服务器配置
小程序已配置为连接生产环境API服务器：`https://sushiro.chinatsu1124.com`

如需本地开发，可以修改 `utils/api.ts` 中的配置：
```bash
python spa_server_standalone.py
```

本地开发地址：`http://localhost:8765`

### 小程序功能使用
1. **首页使用**：
   - 选择地区和门店
   - 选择查询日期
   - 点击"更新数据"查看实时统计

2. **图表查看**：
   - 在首页选择门店和日期后
   - 切换到"图表"标签查看详细趋势

3. **就餐分析**：
   - 切换到"就餐分析"标签
   - 选择期望就餐时间
   - 获取智能分析建议

## 设计特色

### UI/UX 设计
- 🎨 **现代化设计**: 采用渐变色彩和圆角卡片设计
- 📱 **移动端优化**: 专为手机屏幕优化的布局
- 🎯 **用户友好**: 直观的导航和清晰的信息层级
- ⚡ **快速响应**: 流畅的页面切换和数据加载

### 交互体验
- 🔄 **实时更新**: 支持手动刷新和自动数据同步
- 💾 **状态保持**: 选择的门店和日期在页面间保持
- 🔔 **友好提示**: 详细的加载状态和错误信息提示
- 📊 **数据可视化**: 直观的图表展示和统计信息

## 注意事项

1. **网络配置**: 确保小程序可以访问 API 服务器地址
2. **权限设置**: 在小程序管理后台配置网络请求域名
3. **图表组件**: 当前使用简化版 ECharts，实际项目中建议使用完整版本
4. **数据更新**: 图表数据依赖首页的门店和日期选择

## 后续优化

- [ ] 集成完整的 ECharts 库
- [ ] 添加数据缓存机制
- [ ] 实现推送通知功能
- [ ] 添加用户偏好设置
- [ ] 支持离线模式
- [ ] 添加更多数据分析功能
